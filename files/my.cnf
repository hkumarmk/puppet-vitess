
[mysqld]
## /opt/vitess/config/mycnf/default.cnf
# basic config parameters for all db instances in the grid

sql_mode = STRICT_TRANS_TABLES
back_log = 50
binlog_format = statement
character_set_server = utf8
collation_server = utf8_general_ci
connect_timeout = 30
datadir = /var/lib/mysql
default-storage-engine = innodb
expire_logs_days = 3
innodb_additional_mem_pool_size = 32M
innodb_autoextend_increment = 64
innodb_buffer_pool_size = 32M
innodb_data_file_path = ibdata1:10M:autoextend
innodb_data_home_dir = /var/lib/mysql
innodb_file_per_table
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT
innodb_lock_wait_timeout = 20
innodb_log_buffer_size = 8M
innodb_log_file_size = 64M
innodb_log_files_in_group = 2
innodb_log_group_home_dir = /var/lib/mysql/logs
innodb_max_dirty_pages_pct = 75
innodb_support_xa = 0
innodb_thread_concurrency = 20
key_buffer = 32M
log-error = /var/log/mysql/mariadb-error.log
long_query_time = 2
max_allowed_packet = 16M
max_connections = 100
net_write_timeout = 60
pid-file = /var/run/mysqld/mysqld.pid
port = 33100
query_cache_size = 128M
query_cache_type = 2
# all db instances should start in read-only mode - once the db is started and
# fully functional, we'll push it into read-write mode
read-only
read_buffer_size = 1M
read_rnd_buffer_size = 1M
server-id = 100
skip-name-resolve
# we now need networking for replication. this is a tombstone to simpler times.
#skip_networking
# all db instances should skip the slave startup - that way we can do any
# out-of-bounds checking before we restart everything - in case we need to do
# some extra work to skip mangled transactions or fudge the slave start
skip_slave_start
slave_net_timeout = 60
slave_load_tmpdir = /tmp
slow-query-log
slow-query-log-file = /var/log/mysql/mariadb-slow.log
socket = /var/run/mysqld/mysqld.sock
sort_buffer_size = 2M
table_cache = 2048
thread_cache = 200
thread_concurrency = 24
tmpdir = /tmp
tmp_table_size = 32M
transaction-isolation = REPEATABLE-READ
# READ-COMMITTED would be better, but mysql 5.1 disables this with statement
# based replication
# READ-UNCOMMITTED might be better
lower_case_table_names = 1
## /opt/vitess/config/mycnf/master.cnf
# master.cnf parameters

log-bin = vt-0000000100-bin
log-slave-updates
sync_binlog = 1
## /opt/vitess/config/mycnf/replica.cnf
# replica.cnf - reserved for future tuning

relay-log = vt-0000000100-relay-bin
relay-log-index =  vt-0000000100-relay-bin.index
relay-log-info-file =  relay-log.info
master-info-file = master.info

# required if this master is chained
# probably safe to turn on all the time at the expense of some disk I/O
# note: this is in the master conf too
log-slave-updates

#slave_compressed_protocol
## /opt/vitess/config/mycnf/master_mariadb.cnf
# enable strict mode so it's safe to compare sequence numbers across different
# server IDs.
gtid_strict_mode = 1
innodb_stats_persistent = 0

